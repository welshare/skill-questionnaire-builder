{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://hl7.org/fhir/json-schema/QuestionnaireResponse",
  "title": "QuestionnaireResponse",
  "description": "see http://hl7.org/fhir/json.html#schema for information about the FHIR Json Schemas",
  "type": "array",
  "items": {
    "description": "A structured set of questions and their answers. The questions are ordered and grouped into coherent subsets, corresponding to the structure of the grouping of the questionnaire being responded to.",
    "type": "object",
    "additionalProperties": false,
    "required": ["item", "status", "resourceType"],
    "properties": {
      "resourceType": {
        "description": "This is a QuestionnaireResponse resource",
        "type": "string",
        "const": "QuestionnaireResponse"
      },
      "_id": {
        "description": "the technical database identifier for this response document",
        "type": "string",
        "format": "uuid",
        "coerce": true
      },
      "id": {
        "description": "The logical id of the resource, as used in the URL for the resource. Once assigned, this value never changes.",
        "pattern": "^[A-Za-z0-9\\-\\.]{1,64}$",
        "type": "string"
      },
      "item": {
        "description": "A group or question item from the original questionnaire for which answers are provided.",
        "type": "array",
        "items": {
          "$ref": "#/definitions/QuestionnaireResponse_Item"
        }
      },
      "questionnaire": {
        "description": "The Questionnaire that defines and organizes the questions for which answers are being provided. Plain string representing the questionnaire URL/ID.",
        "type": "string"
      },
      "status": {
        "description": "The current state of the questionnaire response.",
        "type": "string",
        "enum": [
          "in-progress",
          "completed",
          "amended",
          "entered-in-error",
          "stopped"
        ]
      },
      "authored": {
        "description": "The date and/or time that this questionnaire response was last modified by the user - e.g. changing answers or revising status.",
        "type": "string",
        "format": "date-time",
        "coerce": true
      },
      "subject": {
        "description": "The subject of the questionnaire response.  This could be a patient, organization, practitioner, device, etc.  This is who/what the answers apply to, but is not necessarily the source of information.",
        "type": "object",
        "properties": {
          "type": {
            "type": "string"
          },
          "reference": {
            "type": "string"
          },
          "display": {
            "type": "string"
          }
        },
        "required": ["reference"]
      },
      "meta": {
        "description": "The metadata about the resource. This is content that is maintained by the infrastructure. Changes to the content might not always be associated with version changes to the resource.",
        "type": "object",
        "properties": {
          "profile": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "tag": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "system": {
                  "type": "string"
                },
                "code": {
                  "type": "string"
                }
              }
            }
          }
        }
      },

      "author": {
        "description": "The individual or device that received the answers to the questions in the QuestionnaireResponse and recorded them in the system.",
        "type": "object",
        "properties": {
          "type": {
            "type": "string"
          },
          "reference": {
            "type": "string"
          },
          "display": {
            "type": "string"
          }
        }
      },
      "source": {
        "description": "The individual or device that answered the questions about the subject.",
        "type": "object",
        "properties": {
          "id": {
            "description": "Unique id for the element within a resource (for internal references). This may be any string value that does not contain spaces.",
            "type": "string"
          },
          "type": {
            "description": "The expected type of the target of the reference. If both Reference.type and Reference.reference are populated and Reference.reference is a FHIR URL, both SHALL be consistent.\n\nThe type is the Canonical URL of Resource Definition that is the type this reference refers to. References are URLs that are relative to http://hl7.org/fhir/StructureDefinition/ e.g. \"Patient\" is a reference to http://hl7.org/fhir/StructureDefinition/Patient. Absolute URLs are only allowed for logical models (and can only be used in references in logical models, not resources).",
            "type": "string"
          },
          "reference": {
            "type": "string"
          },
          "display": {
            "description": "Plain text narrative that identifies the resource in addition to the resource reference.",
            "type": "string"
          }
        }
      }
    }
  },
  "definitions": {
    "QuestionnaireResponse_Item": {
      "description": "A structured set of questions and their answers. The questions are ordered and grouped into coherent subsets, corresponding to the structure of the grouping of the questionnaire being responded to.",
      "type": "object",
      "additionalProperties": false,
      "required": ["linkId"],
      "properties": {
        "id": {
          "description": "Unique id for the element within a resource (for internal references). This may be any string value that does not contain spaces.",
          "type": "string"
        },
        "linkId": {
          "description": "The item from the Questionnaire that corresponds to this item in the QuestionnaireResponse resource.",
          "type": "string"
        },
        "definition": {
          "description": "A reference to an [ElementDefinition](elementdefinition.html) that provides the details for the item.",
          "type": "string"
        },
        "text": {
          "description": "Text that is displayed above the contents of the group or as the text of the question being answered.",
          "type": "string"
        },
        "answer": {
          "description": "The respondents answer(s) to the question.",
          "type": "array",
          "items": {
            "$ref": "#/definitions/QuestionnaireResponse_Answer"
          }
        },
        "item": {
          "description": "Sub-questions, sub-groups or display items nested beneath a group.",
          "type": "array",
          "items": {
            "$ref": "#/definitions/QuestionnaireResponse_Item"
          }
        }
      }
    },
    "QuestionnaireResponse_Answer": {
      "description": "A structured set of questions and their answers. The questions are ordered and grouped into coherent subsets, corresponding to the structure of the grouping of the questionnaire being responded to.",
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "id": {
          "description": "Unique id for the element within a resource (for internal references). This may be any string value that does not contain spaces.",
          "type": "string"
        },
        "valueBoolean": {
          "description": "The answer (or one of the answers) provided by the respondent to the question.",
          "type": "boolean"
        },
        "valueDecimal": {
          "description": "The answer (or one of the answers) provided by the respondent to the question.",
          "pattern": "^-?(0|[1-9][0-9]{0,17})(\\.[0-9]{1,17})?([eE][+-]?[0-9]{1,9})?$",
          "type": "number"
        },
        "valueInteger": {
          "description": "The answer (or one of the answers) provided by the respondent to the question.",
          "pattern": "^[0]|[-+]?[1-9][0-9]*$",
          "type": "number"
        },
        "valueDate": {
          "description": "The answer (or one of the answers) provided by the respondent to the question.",
          "pattern": "^([0-9]([0-9]([0-9][1-9]|[1-9]0)|[1-9]00)|[1-9]000)(-(0[1-9]|1[0-2])(-(0[1-9]|[1-2][0-9]|3[0-1]))?)?$",
          "type": "string",
          "format": "date"
        },
        "valueDateTime": {
          "description": "The answer (or one of the answers) provided by the respondent to the question.",
          "pattern": "^([0-9]([0-9]([0-9][1-9]|[1-9]0)|[1-9]00)|[1-9]000)(-(0[1-9]|1[0-2])(-(0[1-9]|[1-2][0-9]|3[0-1])(T([01][0-9]|2[0-3]):[0-5][0-9]:([0-5][0-9]|60)(\\.[0-9]{1,9})?)?)?(Z|(\\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00)?)?)?$",
          "type": "string",
          "format": "date"
        },
        "valueTime": {
          "description": "The answer (or one of the answers) provided by the respondent to the question.",
          "pattern": "^([01][0-9]|2[0-3]):[0-5][0-9]:([0-5][0-9]|60)(\\.[0-9]{1,9})?$",
          "type": "string"
        },
        "valueString": {
          "description": "The answer (or one of the answers) provided by the respondent to the question.",
          "pattern": "^^[\\s\\S]+$$",
          "type": "string"
        },
        "valueUri": {
          "description": "The answer (or one of the answers) provided by the respondent to the question.",
          "pattern": "^\\S*$",
          "type": "string"
        },
        "valueCoding": {
          "description": "The answer (or one of the answers) provided by the respondent to the question.",
          "type": "object",
          "properties": {
            "system": {
              "type": "string"
            },
            "version": {
              "type": "string"
            },
            "display": {
              "type": "string"
            },
            "code": {
              "type": "string"
            }
          }
        },
        "valueQuantity": {
          "description": "The answer (or one of the answers) provided by the respondent to the question.",
          "type": "object",
          "properties": {
            "value": {
              "type": "number"
            },
            "unit": {
              "type": "string"
            },
            "system": {
              "type": "string"
            },
            "code": {
              "type": "string"
            }
          }
        },
        "valueAttachment": {
          "description": "Content in a format defined elsewhere",
          "type": "object",
          "properties": {
            "id": {
              "type": "string"
            },
            "contentType": {
              "type": "string"
            },
            "size": {
              "type": "number"
            },
            "title": {
              "type": "string"
            },
            "url": {
              "type": "string"
            },
            "hash": {
              "type": "string"
            }
          }
        },
        "item": {
          "description": "Nested groups and/or questions found within this particular answer.",
          "items": {
            "$ref": "#/definitions/QuestionnaireResponse_Item"
          },
          "type": "array"
        }
      }
    }
  }
}
